{"ast":null,"code":"import _asyncToGenerator from\"/Users/funglam/Desktop/HRManagementSystem/ManagementSystemFE_2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/funglam/Desktop/HRManagementSystem/ManagementSystemFE_2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/funglam/Desktop/HRManagementSystem/ManagementSystemFE_2/node_modules/@babel/runtime/regenerator/index.js\";import{Modal,Button}from\"antd\";import{useContext,useState,useEffect,useRef}from\"react\";import{AppContext}from\"../employeeTable\";import InputForm from\"../inputForm\";import{InitContext}from\"../../Layout/appLayout\";import{getLabelMap,formFieldList,isFormValid,getEmployeeFromForm}from\"../../common\";import moment from\"moment\";import{dateFormat}from\"../../common/dateHelper\";import{createEmployee}from\"../../api/employee\";import\"./index.css\";import{jsx as _jsx}from\"react/jsx-runtime\";var NewFormModal=function NewFormModal(){var _useContext=useContext(AppContext),newForm=_useContext.newForm,iniEmployees=_useContext.iniEmployees,initForm=_useContext.initForm;var _newForm=_slicedToArray(newForm,2),newFormVisible=_newForm[0],setNewFormVisible=_newForm[1];var _useContext2=useContext(InitContext),fieldLabel=_useContext2.fieldLabel;var _useState=useState(new Map()),_useState2=_slicedToArray(_useState,2),labelMap=_useState2[0],setLabelMap=_useState2[1];var formRef=useRef();useEffect(function(){if(fieldLabel){var _labelMap=getLabelMap(fieldLabel,\"ALERTMODAL\");setLabelMap(_labelMap);}},[fieldLabel]);var handleOk=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var isValid,valid,emp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isValid=true;formRef.current.submit();_context.next=4;return isFormValid(formRef,formFieldList);case 4:valid=_context.sent;if(valid){emp=getEmployeeFromForm(formRef);createEmployee(emp).then(function(rsp){if(rsp.data){iniEmployees();formRef.current.resetFields();}}).catch(function(err){console.log(err);});setNewFormVisible(false);}case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleOk(){return _ref.apply(this,arguments);};}();var handleCancel=function handleCancel(){setNewFormVisible(false);};return/*#__PURE__*/_jsx(Modal,{width:1000,className:\"modal-content\",title:labelMap&&labelMap.get(\"A6\")?labelMap.get(\"A6\"):\"NEW\",visible:newFormVisible,onCancel:handleCancel,footer:[/*#__PURE__*/_jsx(Button,{onClick:handleCancel,className:\"modalNoButton\",children:labelMap&&labelMap.get(\"A3\")?labelMap.get(\"A3\"):\"No\"},\"cancel\"),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleOk,className:\"modalOkButton\",htmlType:\"submit\",children:labelMap&&labelMap.get(\"A2\")?labelMap.get(\"A2\"):\"Yes\"},\"ok\")],children:/*#__PURE__*/_jsx(InputForm,{formIniVal:null,formRef:formRef})});};export default NewFormModal;","map":{"version":3,"sources":["/Users/funglam/Desktop/HRManagementSystem/ManagementSystemFE_2/src/components/modal/newFormModal.jsx"],"names":["Modal","Button","useContext","useState","useEffect","useRef","AppContext","InputForm","InitContext","getLabelMap","formFieldList","isFormValid","getEmployeeFromForm","moment","dateFormat","createEmployee","NewFormModal","newForm","iniEmployees","initForm","newFormVisible","setNewFormVisible","fieldLabel","Map","labelMap","setLabelMap","formRef","handleOk","isValid","current","submit","valid","emp","then","rsp","data","resetFields","catch","err","console","log","handleCancel","get"],"mappings":"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","sourcesContent":["import { Modal, Button } from \"antd\";\nimport { useContext, useState, useEffect, useRef } from \"react\";\nimport { AppContext } from \"../employeeTable\";\nimport InputForm from \"../inputForm\";\nimport { InitContext } from \"../../Layout/appLayout\";\nimport {\n  getLabelMap,\n  formFieldList,\n  isFormValid,\n  getEmployeeFromForm,\n} from \"../../common\";\nimport moment from \"moment\";\nimport { dateFormat } from \"../../common/dateHelper\";\nimport { createEmployee } from \"../../api/employee\";\nimport \"./index.css\";\nconst NewFormModal = () => {\n  const { newForm, iniEmployees, initForm } = useContext(AppContext);\n  const [newFormVisible, setNewFormVisible] = newForm;\n  const { fieldLabel } = useContext(InitContext);\n  const [labelMap, setLabelMap] = useState(new Map());\n  const formRef = useRef();\n\n  useEffect(() => {\n    if (fieldLabel) {\n      let labelMap = getLabelMap(fieldLabel, \"ALERTMODAL\");\n      setLabelMap(labelMap);\n    }\n  }, [fieldLabel]);\n  const handleOk = async () => {\n    let isValid = true;\n    formRef.current.submit();\n\n    let valid = await isFormValid(formRef, formFieldList);\n\n    if (valid) {\n      let emp = getEmployeeFromForm(formRef);\n      createEmployee(emp)\n        .then((rsp) => {\n          if (rsp.data) {\n            iniEmployees();\n            formRef.current.resetFields();\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n      setNewFormVisible(false);\n    }\n  };\n\n  const handleCancel = () => {\n    setNewFormVisible(false);\n  };\n\n  return (\n    <Modal\n      width={1000}\n      className=\"modal-content\"\n      title={labelMap && labelMap.get(\"A6\") ? labelMap.get(\"A6\") : \"NEW\"}\n      visible={newFormVisible}\n      onCancel={handleCancel}\n      footer={[\n        <Button key=\"cancel\" onClick={handleCancel} className=\"modalNoButton\">\n          {labelMap && labelMap.get(\"A3\") ? labelMap.get(\"A3\") : \"No\"}\n        </Button>,\n        <Button\n          key=\"ok\"\n          type=\"primary\"\n          onClick={handleOk}\n          className=\"modalOkButton\"\n          htmlType=\"submit\"\n        >\n          {labelMap && labelMap.get(\"A2\") ? labelMap.get(\"A2\") : \"Yes\"}\n        </Button>,\n      ]}\n    >\n      <InputForm formIniVal={null} formRef={formRef} />\n    </Modal>\n  );\n};\n\nexport default NewFormModal;\n"]},"metadata":{},"sourceType":"module"}